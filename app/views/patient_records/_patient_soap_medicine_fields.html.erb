<div class="nested-fields">
  <div class="card <%= 'card-collapsed' if f.object.persisted? %> mb-2">
    <div class="card-header">
      <h3 class="card-title">
        <%= f.object.persisted? ? "#{f.object.name_formatted}" : 'Adicionar Medicamento' %>
      </h3>
      <% if f.object.persisted? %>
        <div class="card-options">
          <a href="#" class="card-options-collapse badge bg-blue-deep text-white p-1" data-toggle="card-collapse">
            <i class="fe fe-chevron-up"></i>
          </a>
        </div>
      <% end %>
    </div>
    <% unless show?(f.object.persisted?) %>
      <div class="card-body p-2 text-left">
        <%= link_to_remove_association f, class: 'btn btn-icon btn-sm btn-danger', role: 'button' do %>
          <i class="fas fa-times mr-2"></i>Remover
        <% end %>
      </div>
    <% end %>
    <div class="card-body pb-2">
      <div class="row">
        <%= f.association :medicine, collection: [], wrapper_html: {class: 'col-lg-6 col-sm-12'}, input_html: {class: 'medicines', disabled: show?(f.object.persisted?)} %>
        <%= f.input :concentration, wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {disabled: show?(f.object.persisted?)} %>
        <%= f.association :pharmaceutical_form, collection: [], wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {class: 'pharmaceutical-forms', disabled: show?(f.object.persisted?)} %>
        <%= f.association :administration_way, collection: [], wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {class: 'administration-ways', disabled: show?(f.object.persisted?)} %>
        <%= f.association :recipe_type, collection: [], wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {class: 'recipe-types', disabled: show?(f.object.persisted?)} %>
        <%= f.input :dose, wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {disabled: show?(f.object.persisted?)} %>
        <%= f.association :dose_frequency_type, collection: [], wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {class: 'dose-frequency-types', disabled: show?(f.object.persisted?)} %>
        <%= f.input :dose_frequency, wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {disabled: show?(f.object.persisted?)} %>
        <%= f.input :dose_quantity, wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {disabled: show?(f.object.persisted?)} %>
        <%= f.input :treatment_date, as: :date, html5: true, wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {disabled: show?(f.object.persisted?)} %>
        <%= f.association :duration_type, collection: [], wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {class: 'duration-types', disabled: show?(f.object.persisted?)} %>
        <%= f.input :duration, wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {disabled: show?(f.object.persisted?)} %>
        <%= f.input :unique_dose, wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {disabled: show?(f.object.persisted?)} %>
        <%= f.input :continuous_dose, wrapper_html: {class: 'col-lg-3 col-sm-12'}, input_html: {disabled: show?(f.object.persisted?)} %>
        <%= f.input :recommendations, wrapper_html: {class: 'col-lg-12 col-sm-12'}, input_html: {disabled: show?(f.object.persisted?)} %>
      </div>
    </div>
  </div>
</div>

